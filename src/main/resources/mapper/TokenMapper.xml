<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.web.userchat.mapper.TokenMapper">

    <resultMap id="tokenMap" type="Token">
        <id property="id" column="id"/>
        <result property="refreshToken" column="refresh_token"/>
        <result property="email" column="email"/>
        <result property="createDate" column="create_date"/>
        <result property="expiryDate" column="expiry_date"/>
    </resultMap>

    <insert id="saveRefreshToken" parameterType="Token">
        INSERT INTO refresh_tokens (
                refresh_token,
                email,
                create_date,
                expires_date
        ) VALUES (
                #{refreshToken},
                #{email},
                #{create_date},
                #{expires_date}
                         )
    </insert>

    <delete id="deleteRefreshToken">
        DELETE FROM refresh_tokens
        WHERE email = #{email}
    </delete>

</mapper>